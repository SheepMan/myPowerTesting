<% if flash[:success] != nil %>

<style>
  #graphContent{
    margin-top:50px;
  }

  #feedback-widget{
    display:none;
  }
</style>
<% end %>

<script src="/assets/gmaps4rails/gmaps4rails.base.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.bing.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.googlemaps.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.mapquest.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.openlayers.js?body=1" type="text/javascript"></script>



<!-- Begin Map Container -->
<div class="contentPage" id="graphContent" data-role="page">
    <!-- Begin header -->
    <div data-role="header" class="ui-bar-b" data-position="fixed">
      <a href="/" data-theme="a" data-ajax="false">Back</a>
      <h1> UC Berkeley Campus Map</h1>
    </div>
    <!-- End header -->

    <div data-role="content">
       <%= stylesheet_link_tag "gmaps4rails" %>
       <%= gmaps4rails(@json) %>
    </div>

<script type="text/javascript" src="//maps.google.com/maps/api/js?v=3.5&sensor=false&amp;libraries=geometry"></script>
<script type="text/javascript" src="//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js"></script>
<script type="text/javascript" src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.5/src/markerclusterer_packed.js"></script>
<script type="text/javascript" src="//google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/src/richmarker-compiled.js"></script>  

<script type="text/javascript" charset="utf-8">

Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.map_options.auto_adjust = true;
Gmaps.map.initialize();
Gmaps.map.markers = <%= @json.html_safe %>;
Gmaps.map.markers_conf.do_clustering = true;
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};    
window.onload = function() { Gmaps.loadMaps(); };

</script>

     
    </div>

</div>

<style type="text/css">
  body { height: 100%; }

  /* Override default jQuery Mobile styling */
  .ui-icon { height: 30px !important; width: 30px !important; margin-left: -15px !important; box-shadow: none !important; border-radius: 0 !important; }
  .ui-icon-graph { background: url('/assets/graph.png') no-repeat 0px 0px !important; background-size: 100% auto !important; }
  .ui-icon-feature { background: url('/assets/green_feature.png') no-repeat 0px 0px !important; background-size: 60% auto !important; }
  #green-features .ui-li-desc { overflow: visible; white-space: normal; }

  .localnav { margin-top: 15px; }
  .localnav li { float: left; }

  #content { padding: 25px; }
  .content-page { margin: 0 auto; }

  #graphContainer { overflow: hidden}
  #intervalControls { width: 315px; height: 45px; text-align:center; margin: 0 auto;}
  #intervalControls ul { margin: 5px auto; width: 266px; }

  .success{
    margin-left: -9px;
    margin-top: -9px;
    z-index: 1001;
    position:absolute;
  }
  .message{
    font-family: Helvetica,Arial,sans-serif;
  }
</style>

<!-- Uncomment this block when we start using highcharts -->


<!-- End Block -->




